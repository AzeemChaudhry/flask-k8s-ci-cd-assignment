# kubernetes/service.yaml
# Service to expose the Flask app inside the cluster and externally.
# Uses NodePort type so minikube (or external testers) can access the app via <minikube-ip>:<nodePort>
#
# Notes:
# - NodePort must be in the range allowed by your cluster (default 30000-32767).
# - If you prefer to use minikube tunnel or ingress, that is an alternative, but NodePort matches assignment.

apiVersion: v1
kind: Service
metadata:
  name: flask-service
  labels:
    app: flask-app
spec:
  selector:
    app: flask-app
  type: NodePort   # NodePort provides external access for minikube demo
  ports:
    - protocol: TCP
      port: 80         # Cluster IP port
      targetPort: 5000 # Container port
      nodePort: 30080  # NodePort for external access (choose an available port)
